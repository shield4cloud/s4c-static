window.addEventListener('load', (event) => { const session=getCookie("pSession"); const xhr=new XMLHttpRequest(); xhr.onload = () => { if (xhr.status == 202) { const access = JSON.parse(xhr.responseText); const privateAccess = access.privateAccess; const publicAccess = access.publicAccess; document.getElementById("privateAccess").innerText = privateAccess; document.getElementById("publicAccess").innerText = publicAccess; } hasError(xhr); }; xhr.open('GET', 'https://api.shield4cloud.com/dashboard/users/access/'); xhr.setRequestHeader('Content-Type', 'application/json'); xhr.setRequestHeader('X-Token', session); xhr.send(); }); function hasError(request) { if (request.status == 200 || request.status == 400) { const errorResult = JSON.parse(request.responseText); if (errorResult.error == "User is unknown") { noSafeLogin(); } if (errorResult.error == "Bad Information") { noSafeLogin(); } } }