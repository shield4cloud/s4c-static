document.getElementById('sendRegister') .onclick = function () { const email=document.getElementById("emailRegister") .value; const password=document.getElementById("passwordRegister") .value; const firstname=document.getElementById("firstnameRegister") .value; const lastname=document.getElementById("lastnameRegister") .value; const phone=document.getElementById("phoneRegister") .value; const xhr=new XMLHttpRequest(); xhr.onload = () => { if (xhr.status == 202) { const registerResult = JSON.parse(xhr.responseText); if(registerResult.success == "Account create") { alertSuccess("Votre compte à été créer"); window.setTimeout(function(){ window.location.href = "/sign-in/"; }, 5000); } } if (xhr.status == 200) { const errorResult = JSON.parse(xhr.responseText); if(errorResult.error == "User is known") { alertError("Compte déja existant"); } if(errorResult.error == "Email is not valide") { alertError("Email est invalide"); } if(errorResult.error == "Password is not valide") { alertError("Mot de passe est invalide"); } if(errorResult.error == "Password Big Size") { alertError("Mot de passe à plus de 32 caractère"); } if(errorResult.error == "Lastname is not valide") { alertError("Nom de famille est invalide"); } if(errorResult.error == "Lastname Big Size") { alertError("Nom de famille à plus de 64 caractère"); } if(errorResult.error == "Firstname is not valide") { alertError("Nom est invalide"); } if(errorResult.error == "Firstname Big Size") { alertError("Votre nom à plus de 64 caractère"); } if(errorResult.error == "Phone is not valide") { alertError("Téléphone est invalide"); } if(errorResult.error == "Phone Big Size") { alertError("Votre Téléphone à plus de 18 caractère"); } } if (xhr.status == 400) { const errorResult = JSON.parse(xhr.responseText); if(errorResult.error == "Bad Information") { alertError("Le forumlaire est incorrect"); } } }; const json = {"email": email,"password": password, "firstname": firstname, "lastname": lastname, "phone": phone}; xhr.open('POST', 'https://api.shield4cloud.com/dashboard/users/register/'); xhr.setRequestHeader('Content-Type', 'application/json'); xhr.send(JSON.stringify(json)); }; function alertError(text) { Swal.fire({ icon: 'error', title: 'Oops...', text: text, showConfirmButton: true, timer: 5000 }); }; function alertSuccess(text) { Swal.fire({ icon: 'success', title: 'Good Job!', text: text, showConfirmButton: true, timer: 5000 }); }; function isValidateEmail(inputText) { var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/; if(inputText.match(mailformat)) { return true; } else { return false; } } function empty(string) { if(string == null) { return true; } if(string == "") { return true; } return false; }